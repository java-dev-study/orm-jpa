## Chapter07 고급 매핑

### 7.1 상속 관계 매핑

- ORM에서의 상속 관계 매핑은 객체의 상속 구조와 데이터베이스의 슈퍼타입 서브타입 관계를 매핑하는 것

#### 7.1.1 조인 전략(`@Inheritance(strategy=InheritanceType.JOINED`))

- 엔티티 각각을 모두 테이블로 만들고 자식 테이블이 부모 테이블의 기본키를 받아서 기본키 + 외래키로 사용하는 전략
- 조회 시 조인을 자주 사용하는데, 테이블에 타입을 구분하는 컬럼을 추가해야함

#### 7.1.2 단일 테이블 전략(`@Inheritance(strategy=SINGLE_TABLE`))

- 테이블 하나만 사용하며, 조회 시 조인을 사용하지 않음

#### 7.1.3 구현 클래스마다 테이블 전략(`@Inheritance(strategy=TABLE_PER_CLASS`))

- 자식 엔티티마다 테이블을 생성함 -> 추천x

### 7.2 @MappedSuperclass

- 부모 클래스는 테이블과 매핑하지 않고 부모 클래스를 상속받는 자식 클래스에게 매핑 정보마 제공하고 싶을 때 사용 -> 상속과 유사
- 테이블과 관계없이 엔티티가 공통으로 사용하는 매핑 정보를 모아줌

### 7.3 복합키와 식별 관계 매핑

- 식별 관계 : 부모 테이블의 기본키를 내려받아서 자식 테이블의 기본키 + 외래키로 사용하는 관계
- 비식별 관계 : 부모 테이블의 기본키를 받아서 자식 테이블의 외래키로만 사용하는 관계
  - 필수적 비식별 관계 : 외래키에 null을 허용하지 않음
  - 선택적 비식별 관계 : 외래키에 null을 허용함
- 복합키 사용 시 별도의 식별자 클래스를 생성해야함 -> `@IdClass, `@EmbeddedId

### 7.4 조인 테이블

- 별도의 테이블을 사용해서 연관관계 관리
- 조인 컬럼을 사용하되, 필요한 경우 조인 테이블 사용 

### 7.5 엔티티 하나에 여러 테이블 매핑

- `@SecondaryTable`을 사용하면 한 테이블에 여러 테이블 매핑 가능